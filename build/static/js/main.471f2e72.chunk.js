(this["webpackJsonpbinance-markets"]=this["webpackJsonpbinance-markets"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(7),c=n.n(i),s=(n(12),n(3)),o=n(2),l=(n(13),n(0)),u=function(e){var t=e.data,n=e.prevTicker,r=e.onSymbolClick,i=e.favorites,c=e.onFavoriteClick,s=e.variationType,o=a.useRef(""),u=function(e){e.preventDefault(),c(o.current.children[0].innerText)},b=0;n.forEach((function(e,n){e.symbol===t.symbol&&(b=e.priceChangePercent)}));for(var j=!1,h=0;h<i.length;h++)t.symbol===i[h]&&(j=!0);var d=Math.round(1e5*t.price)/1e5;return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:j?Object(l.jsx)("a",{href:"/#",onClick:u,children:Object(l.jsx)("i",{className:"fas fa-star text-warning"})}):Object(l.jsx)("a",{href:"/#",onClick:u,children:Object(l.jsx)("i",{className:"far fa-star text-warning"})})}),Object(l.jsx)("td",{ref:o,children:Object(l.jsx)("a",{href:"/#",onClick:function(e){e.preventDefault(),r(e.target.text)},children:t.symbol})}),Object(l.jsx)("td",{children:d}),t.variation>0?Object(l.jsx)("td",{className:"text-success",children:t.variation}):Object(l.jsx)("td",{className:"text-danger",children:t.variation}),"cumulative"===s?Object(l.jsx)("td",{children:Math.round(100*t.cumulativeVariation)/100}):null,"absolute"===s?Object(l.jsx)("td",{children:Math.round(100*t.absoluteVariation)/100}):null,Object(l.jsx)("td",{children:b})]})},b=function(e){var t=e.data,n=e.prevTicker,a=e.onSymbolClick,r=e.favorites,i=e.onFavoriteClick,c=e.variationType,s=[];return t.forEach((function(e,t){s.push(Object(l.jsx)(u,{data:e,variationType:c,prevTicker:n,onSymbolClick:a,favorites:r,onFavoriteClick:i},t))})),0===t.length?Object(l.jsx)("div",{className:"emptyTable"}):Object(l.jsxs)("table",{id:"priceTable",className:"table",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{}),Object(l.jsx)("th",{children:"Symbol"}),Object(l.jsx)("th",{children:"Price"}),Object(l.jsx)("th",{children:"Last %"}),"cumulative"===c?Object(l.jsx)("th",{children:Object(l.jsx)("span",{className:"text-warning",children:"Cumul. %"})}):Object(l.jsx)("th",{children:Object(l.jsx)("span",{className:"text-warning",children:"Absol. %"})}),Object(l.jsx)("th",{children:"24h %"})]})}),Object(l.jsx)("tbody",{children:s})]})},j=function(e){var t=e.prices,n=e.title,r=e.prevTicker,i=e.onOpenChart,c=e.favorites,s=e.onFavoriteChange,o=e.variationType,u=void 0===o?"cumulative":o,j=e.icon,h=void 0===j?null:j,d="fas fa-"+h;return Object(l.jsxs)(a.Fragment,{children:[n&&h?Object(l.jsxs)("h2",{children:[n," ",Object(l.jsx)("i",{className:d})]}):n?Object(l.jsx)("h2",{children:n}):null,Object(l.jsx)(b,{data:t,variationType:u,prevTicker:r,onSymbolClick:i,favorites:c,onFavoriteClick:s,icon:h})]})},h=function(e){var t=e.onSubmit,n=(e.onReload,a.useState("")),r=Object(o.a)(n,2),i=r[0],c=r[1];return Object(l.jsxs)("div",{className:"input-group globalTableSearch",children:[Object(l.jsx)("input",{type:"text",className:"form-control",placeholder:"Search for a coin...","aria-label":"Search","aria-describedby":"searchButton",value:i,onChange:function(e){e.preventDefault(),c(e.target.value.toUpperCase())}}),Object(l.jsx)("button",{className:"btn btn-outline-primary",type:"button",id:"searchButton",onClick:function(e){e.preventDefault(),t(i),c("")},children:Object(l.jsx)("i",{className:"fas fa-search"})})]})},d=function(e){var t=e.prices,n=e.title,r=e.prevTicker,i=e.onOpenChart,c=e.favorites,u=e.onFavoriteChange,b=e.variationType,d=void 0===b?"cumulative":b,f=e.icon,v=void 0===f?null:f,m=a.useState([]),O=Object(o.a)(m,2),x=O[0],p=O[1];return Object(l.jsxs)(a.Fragment,{children:[Object(l.jsx)("h2",{className:"AllMarketTable",children:n}),Object(l.jsx)(h,{onSubmit:function(e){var n=Object(s.a)(t).filter((function(t){return t.symbol.search(e)>-1}));p(n)}}),Object(l.jsx)(j,{prices:x,variationType:d,prevTicker:r,onOpenChart:i,favorites:c,onFavoriteChange:u,icon:v})]})},f=(n(15),function(){return Object(l.jsx)("div",{className:"spinner-border text-warning",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),v=function(e){var t=e.data,n=e.symbol,r=e.interval,i=a.useRef(null);return a.useEffect((function(){var e=window.LightweightCharts,a=e.createChart(i.current,{width:i.current.offsetWidth,height:i.current.offsetHeight,layout:{backgroundColor:"#FFF",textColor:"#000"},grid:{vertLines:{color:"rgba(197, 203, 206, 0.5)"},horzLines:{color:"rgba(197, 203, 206, 0.5)"}},crosshair:{mode:e.CrosshairMode.Normal},rightPriceScale:{borderColor:"rgba(197, 203, 206, 0.8)"},timeScale:{borderColor:"rgba(197, 203, 206, 0.8)"}}).addCandlestickSeries({upColor:"rgba(0, 255, 0, 1)",downColor:"rgba(255, 0, 0, 1)",borderDownColor:"rgba(255, 0, 0, 1)",borderUpColor:"rgba(0, 255, 0, 1)",wickDownColor:"rgba(255, 0, 0, 1)",wickUpColor:"rgba(0, 255, 0, 1)"});a.setData(t),new WebSocket("wss://stream.binance.com:9443/ws/"+n+"@kline_"+r).onmessage=function(e){var t=JSON.parse(e.data).k;a.update({time:t.t/1e3,open:t.o,high:t.h,low:t.l,close:t.c})}}),[t,n,r]),Object(l.jsx)("div",{id:"Chart",ref:i})},m=function(e){var t=e.onClose,n=e.symbol,r=a.useState(!0),i=Object(o.a)(r,2),c=i[0],s=i[1],u=a.useState(!1),b=Object(o.a)(u,2),j=b[0],h=b[1],d=a.useState([]),m=Object(o.a)(d,2),O=m[0],x=m[1],p=a.useState("5m"),g=Object(o.a)(p,2),y=g[0],C=g[1];a.useEffect((function(){fetch("/api/history/"+n+"/"+y).then((function(e){return e.json()})).then((function(e){e.errorStatus?h(!0):(x(e),s(!1))}))}),[n,y]);var S=function(e){e.preventDefault(),s(!0),C(e.target.innerText)};return Object(l.jsxs)("div",{id:"chartBox",children:[Object(l.jsx)("a",{href:"/#",onClick:function(e){e.preventDefault(),t()},id:"chartCloser",children:Object(l.jsx)("i",{className:"fas fa-times-circle"})}),c?Object(l.jsx)(f,{}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{id:"chartTitle",children:Object(l.jsxs)("h3",{children:[n," (",y,")"]})}),Object(l.jsx)(v,{data:O,symbol:n.toLowerCase(),interval:y}),Object(l.jsxs)("div",{id:"chartTimeframe",children:[Object(l.jsx)("button",{onClick:S,disabled:"1m"===y,children:"1m"}),Object(l.jsx)("button",{onClick:S,disabled:"5m"===y,children:"5m"}),Object(l.jsx)("button",{onClick:S,disabled:"15m"===y,children:"15m"}),Object(l.jsx)("button",{onClick:S,disabled:"1h"===y,children:"1h"}),Object(l.jsx)("button",{onClick:S,disabled:"1d"===y,children:"1d"})]})]}),j?Object(l.jsx)("h2",{children:"Error.. Try again.."}):null]})},O=(n(16),function(e){var t=e.name,n=e.checked;return Object(l.jsxs)("div",{className:"form-check",children:[Object(l.jsx)("input",{className:"form-check-input",type:"radio",name:t,id:t,checked:n,readOnly:!0}),Object(l.jsx)("label",{className:"form-check-label",htmlFor:t,children:t})]})}),x=function(e){var t=e.settings,n=e.onSettingsChange,r=e.minDelay,i=a.useState(t.delay/1e3),c=Object(o.a)(i,2),s=c[0],u=c[1],b=a.useState("USDT"),j=Object(o.a)(b,2),h=j[0],d=j[1];return Object(l.jsxs)("div",{className:"settingsBar",children:[Object(l.jsx)("div",{className:"barTitle",children:Object(l.jsx)("h2",{children:"Settings"})}),Object(l.jsxs)("div",{className:"currentValues",children:[Object(l.jsxs)("div",{children:["Current symbol filter : ",t.symbol]}),Object(l.jsxs)("div",{children:["Current refresh delay : ",t.delay/1e3," secs"]})]}),Object(l.jsxs)("div",{className:"form-group setSymbol",onChange:function(e){d(e.target.name)},children:[Object(l.jsx)("label",{className:"setSymbolLabel",children:"Filter symbol pairs"}),Object(l.jsx)(O,{name:"USDT",checked:"USDT"===h}),Object(l.jsx)(O,{name:"BTC",checked:"BTC"===h})]}),Object(l.jsxs)("div",{className:"form-group setDelay",children:[Object(l.jsxs)("label",{className:"setDelayLabel",children:["Refresh prices (min : ",r/1e3," secs)"]}),Object(l.jsx)("input",{type:"text",id:"refreshDelayInput",className:"form-control refreshDelayInput",value:s,onChange:function(e){e.preventDefault(),u(e.target.value)}})]}),Object(l.jsx)("div",{className:"submitButton",children:Object(l.jsx)("button",{className:"btn btn-info btn-submit",onClick:function(e){e.preventDefault(),n({delay:s,selectedSymbol:h})},children:"Set"})})]})},p=function(e){var t=e.start,n=a.useState(0),r=Object(o.a)(n,2),i=r[0],c=r[1],s=a.useState(""),u=Object(o.a)(s,2),b=u[0],j=u[1];return a.useEffect((function(){var e=setInterval((function(){return c((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}),[]),a.useEffect((function(){var e=Date.now()-t;if(e/1e3<60){var n=Math.round(e/1e3)+" s";j(n)}else if(e/1e3<3600){var a=Math.trunc(e/1e3/60),r=e-60*a*1e3,i=Math.round(r/1e3);j(a+"m "+i+"s")}else{var c=Math.trunc(e/1e3/60/60),s=e-3600*c*1e3,o=Math.trunc(s/1e3/60),l=s-60*o*1e3,u=Math.round(l/1e3);j(c+"h "+o+"m "+u+"s")}}),[i,t]),Object(l.jsxs)("div",{className:"titleBar text-warning",children:[Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"Binance Market"})}),Object(l.jsx)("div",{className:"timeSpendDiv",children:Object(l.jsxs)("h3",{children:["Time spend : ",b]})})]})},g=3e3;var y=function(){var e=a.useState(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],i=a.useState(0),c=Object(o.a)(i,2),u=c[0],b=c[1],h=a.useState("USDT"),f=Object(o.a)(h,2),v=f[0],O=f[1],y=a.useState(g),C=Object(o.a)(y,2),S=C[0],k=C[1],T=a.useState(0),N=Object(o.a)(T,2),w=N[0],D=N[1],F=a.useState([]),W=Object(o.a)(F,2),V=W[0],M=W[1],E=a.useState([]),B=Object(o.a)(E,2),L=B[0],U=B[1],I=a.useState([]),P=Object(o.a)(I,2),A=P[0],R=P[1],J=a.useState([]),z=Object(o.a)(J,2),H=z[0],_=z[1],q=a.useState([]),G=Object(o.a)(q,2),K=G[0],Q=G[1],X=a.useState([]),Y=Object(o.a)(X,2),Z=Y[0],$=Y[1],ee=a.useState([]),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],re=a.useState([]),ie=Object(o.a)(re,2),ce=ie[0],se=ie[1],oe=a.useState(0),le=Object(o.a)(oe,2),ue=le[0],be=le[1],je=a.useState(!1),he=Object(o.a)(je,2),de=he[0],fe=he[1],ve=a.useState(""),me=Object(o.a)(ve,2),Oe=me[0],xe=me[1];a.useEffect((function(){var e=setInterval((function(){return D((function(e){return e+1}))}),1e4);return be(Date.now()),function(){return clearInterval(e)}}),[]),a.useEffect((function(){var e=setInterval((function(){return b((function(e){return e+1}))}),S);return function(){return clearInterval(e)}}),[S]),a.useEffect((function(){fetch("https://api.binance.com/api/v3/ticker/24hr").then((function(e){return e.json()})).then((function(e){U(e),r(!1)}))}),[w]),a.useEffect((function(){fetch("https://api.binance.com/api/v3/ticker/price").then((function(e){return e.json()})).then((function(e){e.forEach((function(t,n){if(0===V.length)t.variation=0,t.cumulativeVariation=0,t.absoluteVariation=0;else{var a=V[n].price,r=100*(e[n].price-a)/a;t.variation=Math.round(1e3*r)/1e3;var i=V[n].cumulativeVariation+t.variation,c=V[n].absoluteVariation+Math.abs(t.variation);t.cumulativeVariation=i,t.absoluteVariation=c}})),M(e)}))}),[u]),a.useEffect((function(){var e=Object(s.a)(V).filter((function(e){return!(!e.symbol.endsWith(v)||e.symbol.endsWith("UP"+v)||e.symbol.endsWith("DOWN"+v))})),t=Object(s.a)(V).filter((function(e){return!(!e.symbol.endsWith(v)||e.symbol.endsWith("UP"+v)||e.symbol.endsWith("DOWN"+v))})),n=Object(s.a)(V).filter((function(e){return!(!e.symbol.endsWith(v)||e.symbol.endsWith("UP"+v)||e.symbol.endsWith("DOWN"+v)||e.symbol.endsWith("BTCST"+v))})),a=Object(s.a)(V).filter((function(e){if(e.symbol.endsWith(v)&&!e.symbol.endsWith("UP"+v)&&!e.symbol.endsWith("DOWN"+v)&&!e.symbol.endsWith("BTCST"+v))for(var t=0;t<L.length;t++){if(L[t].symbol===e.symbol)if(0!==parseFloat(L[t].priceChangePercent))return!0}return!1})),r=Object(s.a)(V).filter((function(e){for(var t=0;t<ce.length;t++)if(e.symbol===ce[t])return!0;return!1}));e.sort((function(e,t){return e.cumulativeVariation<t.cumulativeVariation?1:-1})),t.sort((function(e,t){return e.cumulativeVariation>t.cumulativeVariation?1:-1})),n.sort((function(e,t){return e.absoluteVariation<t.absoluteVariation?1:-1})),a.sort((function(e,t){return e.absoluteVariation>t.absoluteVariation?1:-1})),R(e.slice(0,15)),_(t.slice(0,15)),Q(n.slice(0,15)),$(a.slice(0,15)),ae(r)}),[V,L,ce,v]);var pe=function(e){xe(e),fe(!0)},ge=function(e){for(var t=0;t<ce.length;t++)if(ce[t]===e){var n=Object(s.a)(ce);return n.splice(t,1),void se(n)}var a=Object(s.a)(ce);a.push(e),se(a)},ye={delay:S,symbol:v};return n?Object(l.jsx)("h1",{id:"initialLoading",children:"Loading data from binance API..."}):Object(l.jsxs)(a.Fragment,{children:[de?Object(l.jsx)(m,{symbol:Oe,onClose:function(){fe(!1)}}):null,Object(l.jsx)(p,{start:ue}),Object(l.jsx)(x,{settings:ye,onSettingsChange:function(e){e.delay>=3&&k(1e3*e.delay),O(e.selectedSymbol)},minDelay:g}),Object(l.jsxs)("div",{className:"container",children:[Object(l.jsxs)("div",{className:"row align-items-start filteredTables",children:[Object(l.jsx)("div",{className:"col-sm-6 leftTable",children:Object(l.jsx)(j,{title:"Champions",prices:A,prevTicker:L,onOpenChart:pe,favorites:ce,onFavoriteChange:ge,icon:"chart-line text-success"})}),Object(l.jsx)("div",{className:"col-sm-6",children:Object(l.jsx)(j,{title:"Loosers",prices:H,prevTicker:L,onOpenChart:pe,favorites:ce,onFavoriteChange:ge,icon:"chart-line text-danger"})})]}),Object(l.jsxs)("div",{className:"row align-items-start filteredTables",children:[Object(l.jsx)("div",{className:"col-sm-6 leftTable",children:Object(l.jsx)(j,{title:"Coins on Fire",prices:K,variationType:"absolute",prevTicker:L,onOpenChart:pe,favorites:ce,onFavoriteChange:ge,icon:"fire-alt text-warning"})}),Object(l.jsx)("div",{className:"col-sm-6",children:Object(l.jsx)(j,{title:"Steady Coins",prices:Z,variationType:"absolute",prevTicker:L,onOpenChart:pe,favorites:ce,onFavoriteChange:ge,icon:"snowflake text-primary"})})]}),Object(l.jsx)(j,{title:"Favorites",prices:ne,prevTicker:L,onOpenChart:pe,favorites:ce,onFavoriteChange:ge,icon:"star text-warning"}),Object(l.jsx)(d,{title:"All Market",prices:V,prevTicker:L,onOpenChart:pe,favorites:ce,onFavoriteChange:ge})]})]})};c.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.471f2e72.chunk.js.map