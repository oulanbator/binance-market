(this["webpackJsonpbinance-markets"]=this["webpackJsonpbinance-markets"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(7),c=n.n(i),s=(n(12),n(3)),o=n(2),l=(n(13),n(0)),u=function(e){var t=e.data,n=e.prevTicker,a=e.onSymbolClick,i=e.favorites,c=e.onFavoriteClick,s=r.useRef(""),o=function(e){e.preventDefault(),c(s.current.children[0].innerText)},u=0;n.forEach((function(e,n){e.symbol===t.symbol&&(u=e.priceChangePercent)}));for(var b=!1,j=0;j<i.length;j++)t.symbol===i[j]&&(b=!0);var h=Math.round(1e5*t.price)/1e5;return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:b?Object(l.jsx)("a",{href:"/#",onClick:o,children:Object(l.jsx)("i",{className:"fas fa-star text-warning"})}):Object(l.jsx)("a",{href:"/#",onClick:o,children:Object(l.jsx)("i",{className:"far fa-star text-warning"})})}),Object(l.jsx)("td",{ref:s,children:Object(l.jsx)("a",{href:"/#",onClick:function(e){e.preventDefault(),a(e.target.text)},children:t.symbol})}),Object(l.jsx)("td",{children:h}),Object(l.jsx)("td",{children:Math.round(100*t.cumulativeVariation)/100}),Object(l.jsx)("td",{children:Math.round(100*t.absoluteVariation)/100}),Object(l.jsx)("td",{children:u})]})},b=function(e){var t=e.data,n=e.prevTicker,r=e.onSymbolClick,a=e.favorites,i=e.onFavoriteClick,c=e.variationType,s=[];return t.forEach((function(e,t){s.push(Object(l.jsx)(u,{data:e,variationType:c,prevTicker:n,onSymbolClick:r,favorites:a,onFavoriteClick:i},t))})),0===t.length?Object(l.jsx)("div",{className:"emptyTable"}):Object(l.jsxs)("table",{id:"priceTable",className:"table",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{}),Object(l.jsx)("th",{children:"Symbol"}),Object(l.jsx)("th",{children:"Price"}),"cumulative"===c?Object(l.jsx)("th",{children:Object(l.jsx)("span",{className:"text-warning",children:"Cumul. %"})}):Object(l.jsx)("th",{children:Object(l.jsx)("span",{children:"Cumul. %"})}),"absolute"===c?Object(l.jsx)("th",{children:Object(l.jsx)("span",{className:"text-warning",children:"Absol. %"})}):Object(l.jsx)("th",{children:Object(l.jsx)("span",{children:"Absol. %"})}),Object(l.jsx)("th",{children:"24h %"})]})}),Object(l.jsx)("tbody",{children:s})]})},j=function(e){var t=e.prices,n=e.title,r=e.prevTicker,a=e.onOpenChart,i=e.favorites,c=e.onFavoriteChange,s=e.variationType,o=void 0===s?"cumulative":s,u=e.icon,j=void 0===u?null:u,h="fas fa-"+j;return Object(l.jsxs)("div",{className:"PriceTable",children:[n&&j?Object(l.jsxs)("h2",{children:[n," ",Object(l.jsx)("i",{className:h})]}):n?Object(l.jsx)("h2",{children:n}):null,Object(l.jsx)(b,{data:t,variationType:o,prevTicker:r,onSymbolClick:a,favorites:i,onFavoriteClick:c,icon:j})]})},h=function(e){var t=e.onSubmit,n=(e.onReload,r.useState("")),a=Object(o.a)(n,2),i=a[0],c=a[1];return Object(l.jsxs)("div",{className:"input-group globalTableSearch",children:[Object(l.jsx)("input",{type:"text",className:"form-control",placeholder:"Search for a coin...","aria-label":"Search","aria-describedby":"searchButton",value:i,onChange:function(e){e.preventDefault(),c(e.target.value.toUpperCase())}}),Object(l.jsx)("button",{className:"btn btn-outline-primary",type:"button",id:"searchButton",onClick:function(e){e.preventDefault(),t(i),c("")},children:Object(l.jsx)("i",{className:"fas fa-search"})})]})},d=function(e){var t=e.prices,n=e.title,a=e.prevTicker,i=e.onOpenChart,c=e.favorites,u=e.onFavoriteChange,b=e.variationType,d=void 0===b?"cumulative":b,f=e.icon,v=void 0===f?null:f,O=r.useState([]),m=Object(o.a)(O,2),x=m[0],p=m[1];return Object(l.jsxs)(r.Fragment,{children:[Object(l.jsx)("h2",{className:"AllMarketTable",children:n}),Object(l.jsx)(h,{onSubmit:function(e){var n=Object(s.a)(t).filter((function(t){return t.symbol.search(e)>-1}));p(n)}}),Object(l.jsx)(j,{prices:x,variationType:d,prevTicker:a,onOpenChart:i,favorites:c,onFavoriteChange:u,icon:v})]})},f=(n(15),function(){return Object(l.jsx)("div",{className:"spinner-border text-warning",role:"status",children:Object(l.jsx)("span",{className:"sr-only",children:"Loading..."})})}),v=function(e){var t=e.data,n=e.symbol,a=e.interval,i=r.useRef(null);return r.useEffect((function(){var e=window.LightweightCharts,r=e.createChart(i.current,{width:i.current.offsetWidth,height:i.current.offsetHeight,layout:{backgroundColor:"#FFF",textColor:"#000"},grid:{vertLines:{color:"rgba(197, 203, 206, 0.5)"},horzLines:{color:"rgba(197, 203, 206, 0.5)"}},crosshair:{mode:e.CrosshairMode.Normal},rightPriceScale:{borderColor:"rgba(197, 203, 206, 0.8)"},timeScale:{borderColor:"rgba(197, 203, 206, 0.8)"}}).addCandlestickSeries({upColor:"rgba(0, 255, 0, 1)",downColor:"rgba(255, 0, 0, 1)",borderDownColor:"rgba(255, 0, 0, 1)",borderUpColor:"rgba(0, 255, 0, 1)",wickDownColor:"rgba(255, 0, 0, 1)",wickUpColor:"rgba(0, 255, 0, 1)"});r.setData(t),new WebSocket("wss://stream.binance.com:9443/ws/"+n+"@kline_"+a).onmessage=function(e){var t=JSON.parse(e.data).k;r.update({time:t.t/1e3,open:t.o,high:t.h,low:t.l,close:t.c})}}),[t,n,a]),Object(l.jsx)("div",{id:"Chart",ref:i})},O=function(e){var t=e.onClose,n=e.symbol,a=r.useState(!0),i=Object(o.a)(a,2),c=i[0],s=i[1],u=r.useState(!1),b=Object(o.a)(u,2),j=b[0],h=b[1],d=r.useState([]),O=Object(o.a)(d,2),m=O[0],x=O[1],p=r.useState("5m"),g=Object(o.a)(p,2),y=g[0],C=g[1];r.useEffect((function(){fetch("/api/history/"+n+"/"+y).then((function(e){return e.json()})).then((function(e){e.errorStatus?h(!0):(x(e),s(!1))}))}),[n,y]);var S=function(e){e.preventDefault(),s(!0),C(e.target.innerText)};return Object(l.jsxs)("div",{id:"chartBox",children:[Object(l.jsx)("a",{href:"/#",onClick:function(e){e.preventDefault(),t()},id:"chartCloser",children:Object(l.jsx)("i",{className:"fas fa-times-circle"})}),c?Object(l.jsx)(f,{}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{id:"chartTitle",children:Object(l.jsxs)("h3",{children:[n," (",y,")"]})}),Object(l.jsx)(v,{data:m,symbol:n.toLowerCase(),interval:y}),Object(l.jsxs)("div",{id:"chartTimeframe",children:[Object(l.jsx)("button",{onClick:S,disabled:"1m"===y,children:"1m"}),Object(l.jsx)("button",{onClick:S,disabled:"5m"===y,children:"5m"}),Object(l.jsx)("button",{onClick:S,disabled:"15m"===y,children:"15m"}),Object(l.jsx)("button",{onClick:S,disabled:"1h"===y,children:"1h"}),Object(l.jsx)("button",{onClick:S,disabled:"1d"===y,children:"1d"})]})]}),j?Object(l.jsx)("h2",{children:"Error.. Try again.."}):null]})},m=(n(16),function(e){var t=e.name,n=e.checked;return Object(l.jsxs)("div",{className:"form-check",children:[Object(l.jsx)("input",{className:"form-check-input",type:"radio",name:t,id:t,checked:n,readOnly:!0}),Object(l.jsx)("label",{className:"form-check-label",htmlFor:t,children:t})]})}),x=function(e){var t=e.settings,n=e.onSettingsChange,a=e.minDelay,i=r.useState(t.delay/1e3),c=Object(o.a)(i,2),s=c[0],u=c[1],b=r.useState("USDT"),j=Object(o.a)(b,2),h=j[0],d=j[1];return Object(l.jsxs)("div",{className:"settingsBar",children:[Object(l.jsx)("div",{className:"barTitle",children:Object(l.jsx)("h2",{children:"Settings"})}),Object(l.jsxs)("div",{className:"settingsItems",children:[Object(l.jsxs)("div",{className:"currentValues",children:[Object(l.jsxs)("div",{children:["Current symbol filter : ",t.symbol]}),Object(l.jsxs)("div",{children:["Current refresh delay : ",t.delay/1e3," secs"]})]}),Object(l.jsxs)("div",{className:"form-group setSymbol",onChange:function(e){d(e.target.name)},children:[Object(l.jsx)("label",{className:"setSymbolLabel",children:"Filter symbol pairs"}),Object(l.jsx)(m,{name:"USDT",checked:"USDT"===h}),Object(l.jsx)(m,{name:"BTC",checked:"BTC"===h})]}),Object(l.jsxs)("div",{className:"form-group setDelay",children:[Object(l.jsxs)("label",{className:"setDelayLabel",children:["Refresh prices (min : ",a/1e3," secs)"]}),Object(l.jsx)("input",{type:"text",id:"refreshDelayInput",className:"form-control refreshDelayInput",value:s,onChange:function(e){e.preventDefault(),u(e.target.value)}})]}),Object(l.jsx)("div",{className:"submitButton",children:Object(l.jsx)("button",{className:"btn btn-info btn-submit",onClick:function(e){e.preventDefault(),n({delay:s,selectedSymbol:h})},children:"Set"})})]})]})},p=(n(17),function(e){var t=e.onReset;return Object(l.jsxs)("button",{className:"btn btn-outline-info resetButton",onClick:function(e){e.preventDefault(),t()},children:[Object(l.jsx)("i",{className:"fas fa-redo text-warning"})," Reload page"]})}),g=function(e){var t=e.start,n=e.onReset,a=r.useState(0),i=Object(o.a)(a,2),c=i[0],s=i[1],u=r.useState(""),b=Object(o.a)(u,2),j=b[0],h=b[1];return r.useEffect((function(){var e=setInterval((function(){return s((function(e){return e+1}))}),1e3);return function(){return clearInterval(e)}}),[]),r.useEffect((function(){var e=Date.now()-t;if(e/1e3<60){var n=Math.round(e/1e3)+" s";h(n)}else if(e/1e3<3600){var r=Math.trunc(e/1e3/60),a=e-60*r*1e3,i=Math.round(a/1e3);h(r+"m "+i+"s")}else{var c=Math.trunc(e/1e3/60/60),s=e-3600*c*1e3,o=Math.trunc(s/1e3/60),l=s-60*o*1e3,u=Math.round(l/1e3);h(c+"h "+o+"m "+u+"s")}}),[c,t]),Object(l.jsxs)("div",{className:"titleBar text-warning",children:[Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"Binance Market"})}),Object(l.jsxs)("div",{className:"timeSpendDiv",children:[Object(l.jsxs)("h3",{children:["Time spend : ",j]})," ",Object(l.jsx)(p,{onReset:n})]})]})},y=3e3;var C=function(){var e=r.useState(!0),t=Object(o.a)(e,2),n=t[0],a=t[1],i=r.useState(0),c=Object(o.a)(i,2),u=c[0],b=c[1],h=r.useState(0),f=Object(o.a)(h,2),v=f[0],m=f[1],p=r.useState("USDT"),C=Object(o.a)(p,2),S=C[0],k=C[1],T=r.useState(y),N=Object(o.a)(T,2),D=N[0],w=N[1],F=r.useState(0),W=Object(o.a)(F,2),V=W[0],M=W[1],E=r.useState([]),B=Object(o.a)(E,2),I=B[0],P=B[1],U=r.useState([]),L=Object(o.a)(U,2),R=L[0],A=L[1],J=r.useState([]),z=Object(o.a)(J,2),G=z[0],H=z[1],_=r.useState([]),q=Object(o.a)(_,2),K=q[0],Q=q[1],X=r.useState([]),Y=Object(o.a)(X,2),Z=Y[0],$=Y[1],ee=r.useState([]),te=Object(o.a)(ee,2),ne=te[0],re=te[1],ae=r.useState([]),ie=Object(o.a)(ae,2),ce=ie[0],se=ie[1],oe=r.useState([]),le=Object(o.a)(oe,2),ue=le[0],be=le[1],je=r.useState(0),he=Object(o.a)(je,2),de=he[0],fe=he[1],ve=r.useState(!1),Oe=Object(o.a)(ve,2),me=Oe[0],xe=Oe[1],pe=r.useState(""),ge=Object(o.a)(pe,2),ye=ge[0],Ce=ge[1];r.useEffect((function(){var e=setInterval((function(){return M((function(e){return e+1}))}),1e4);return fe(Date.now()),M((function(e){return e+1})),function(){return clearInterval(e)}}),[v]),r.useEffect((function(){var e=setInterval((function(){return b((function(e){return e+1}))}),D);return b((function(e){return e+1})),function(){return clearInterval(e)}}),[D]),r.useEffect((function(){fetch("https://api.binance.com/api/v3/ticker/24hr").then((function(e){return e.json()})).then((function(e){A(e),a(!1)}))}),[V]),r.useEffect((function(){fetch("https://api.binance.com/api/v3/ticker/price").then((function(e){return e.json()})).then((function(e){e.forEach((function(t,n){if(0===I.length)t.variation=0,t.cumulativeVariation=0,t.absoluteVariation=0;else{var r=I[n].price,a=100*(e[n].price-r)/r;t.variation=Math.round(1e3*a)/1e3;var i=I[n].cumulativeVariation+t.variation,c=I[n].absoluteVariation+Math.abs(t.variation);t.cumulativeVariation=i,t.absoluteVariation=c}})),P(e)}))}),[u]),r.useEffect((function(){var e=Object(s.a)(I).filter((function(e){return!(!e.symbol.endsWith(S)||e.symbol.endsWith("UP"+S)||e.symbol.endsWith("DOWN"+S))})),t=Object(s.a)(I).filter((function(e){return!(!e.symbol.endsWith(S)||e.symbol.endsWith("UP"+S)||e.symbol.endsWith("DOWN"+S))})),n=Object(s.a)(I).filter((function(e){return!(!e.symbol.endsWith(S)||e.symbol.endsWith("UP"+S)||e.symbol.endsWith("DOWN"+S)||e.symbol.endsWith("BTCST"+S))})),r=Object(s.a)(I).filter((function(e){if(e.symbol.endsWith(S)&&!e.symbol.endsWith("UP"+S)&&!e.symbol.endsWith("DOWN"+S)&&!e.symbol.endsWith("BTCST"+S))for(var t=0;t<R.length;t++){if(R[t].symbol===e.symbol)if(0!==parseFloat(R[t].priceChangePercent))return!0}return!1})),a=Object(s.a)(I).filter((function(e){for(var t=0;t<ce.length;t++)if(e.symbol===ce[t])return!0;return!1}));e.sort((function(e,t){return e.cumulativeVariation<t.cumulativeVariation?1:-1})),t.sort((function(e,t){return e.cumulativeVariation>t.cumulativeVariation?1:-1})),n.sort((function(e,t){return e.absoluteVariation<t.absoluteVariation?1:-1})),r.sort((function(e,t){return e.absoluteVariation>t.absoluteVariation?1:-1})),a.sort((function(e,t){return e.cumulativeVariation<t.cumulativeVariation?1:-1})),H(e.slice(0,15)),Q(t.slice(0,15)),$(n.slice(0,15)),re(r.slice(0,15)),be(a)}),[I,R,ce,S]);var Se=function(e){Ce(e),xe(!0)},ke=function(e){for(var t=0;t<ce.length;t++)if(ce[t]===e){var n=Object(s.a)(ce);return n.splice(t,1),void se(n)}var r=Object(s.a)(ce);r.push(e),se(r)},Te={delay:D,symbol:S};return n?Object(l.jsx)("h1",{id:"initialLoading",children:"Loading data from binance API..."}):Object(l.jsxs)(r.Fragment,{children:[me?Object(l.jsx)(O,{symbol:ye,onClose:function(){xe(!1)}}):null,Object(l.jsx)(g,{start:de,onReset:function(){a(!0),P([]),A([]),H([]),Q([]),$([]),re([]),fe(0),m((function(e){return e+1}))}}),Object(l.jsx)(x,{settings:Te,onSettingsChange:function(e){e.delay>=3&&w(1e3*e.delay),k(e.selectedSymbol)},minDelay:y}),Object(l.jsxs)("div",{className:"container",children:[Object(l.jsxs)("div",{className:"PriceTablesGrid",children:[Object(l.jsx)(j,{title:"Champions",prices:G,prevTicker:R,onOpenChart:Se,favorites:ce,onFavoriteChange:ke,icon:"chart-line text-success"}),Object(l.jsx)(j,{title:"Loosers",prices:K,prevTicker:R,onOpenChart:Se,favorites:ce,onFavoriteChange:ke,icon:"chart-line text-danger"}),Object(l.jsx)(j,{title:"Coins on Fire",prices:Z,variationType:"absolute",prevTicker:R,onOpenChart:Se,favorites:ce,onFavoriteChange:ke,icon:"fire-alt text-warning"}),Object(l.jsx)(j,{title:"Steady Coins",prices:ne,variationType:"absolute",prevTicker:R,onOpenChart:Se,favorites:ce,onFavoriteChange:ke,icon:"snowflake text-primary"})]}),Object(l.jsx)(j,{title:"Favorites",prices:ue,prevTicker:R,onOpenChart:Se,favorites:ce,onFavoriteChange:ke,icon:"star text-warning"}),Object(l.jsx)(d,{title:"All Market",prices:I,prevTicker:R,onOpenChart:Se,favorites:ce,onFavoriteChange:ke})]})]})};c.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(C,{})}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.1d6ce5d4.chunk.js.map